# ğŸ—ï¸ Architecture - Kiáº¿n TrÃºc FUN Money Integration

## Tá»•ng Quan

FUN Money sá»­ dá»¥ng kiáº¿n trÃºc **Platform-Centric**, nghÄ©a lÃ  má»—i platform tá»± quáº£n lÃ½:
- Database riÃªng (mint_requests)
- Admin Dashboard riÃªng
- Approval workflow riÃªng

Smart Contract FUN Money chá»‰ lÃ  **execution layer** - nháº­n request tá»« cÃ¡c platform vÃ  mint tokens.

---

## SÆ¡ Äá»“ Kiáº¿n TrÃºc Chi Tiáº¿t

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FUN MONEY MINTING ARCHITECTURE                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                          PLATFORM LAYER                                  â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚   â”‚   â”‚   FUN Profile   â”‚  â”‚   ANGEL AI      â”‚  â”‚   FUN Charity   â”‚   ...   â”‚  â”‚
â”‚   â”‚   â”‚   (Lovable)     â”‚  â”‚   (Lovable)     â”‚  â”‚   (Lovable)     â”‚         â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚   â”‚            â”‚                    â”‚                    â”‚                  â”‚  â”‚
â”‚   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚  â”‚
â”‚   â”‚                                 â”‚                                       â”‚  â”‚
â”‚   â”‚                                 â–¼                                       â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚   â”‚   â”‚                    SUPABASE (per Platform)                       â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚mint_requestsâ”‚  â”‚  profiles   â”‚  â”‚ user_roles  â”‚             â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚ (pending)   â”‚  â”‚  (users)    â”‚  â”‚  (admin)    â”‚             â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                         BLOCKCHAIN LAYER                                 â”‚  â”‚
â”‚   â”‚                                                                          â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚   â”‚   â”‚              BSC TESTNET (Chain ID: 97)                          â”‚   â”‚  â”‚
â”‚   â”‚   â”‚                                                                  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚           FUN Money Smart Contract v1.2.1                 â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚           0x39A1b047D5d143f8874888cfa1d30Fb2AE6F0CD6      â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚                                                           â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚   â”‚lockWithPPLP â”‚  â”‚  activate() â”‚  â”‚   claim()   â”‚      â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   (Mint)    â”‚  â”‚  (User kÃ½)  â”‚  â”‚  (User kÃ½)  â”‚      â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚          â”‚                â”‚                â”‚              â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚          â–¼                â–¼                â–¼              â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   LOCKED    â”‚â†’â†’â”‚  ACTIVATED  â”‚â†’â†’â”‚   FLOWING   â”‚      â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚   â”‚ (in alloc)  â”‚  â”‚ (in alloc)  â”‚  â”‚ (in wallet) â”‚      â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚                                                           â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚   â”‚                    POOLS                          â”‚   â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚   â”‚  99% â”€â”€â–º Community Pool (0x57da...949)           â”‚   â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   1% â”€â”€â–º User Allocation (LOCKED)                â”‚   â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Luá»“ng Hoáº¡t Äá»™ng Chi Tiáº¿t

### Phase 1: User Submit Action

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USER SUBMITS LIGHT ACTION                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  1. User thá»±c hiá»‡n action (donate, create content, volunteer)     â”‚
â”‚                                                                   â”‚
â”‚  2. Platform thu tháº­p evidence:                                   â”‚
â”‚     - Transaction hash (náº¿u cÃ³)                                   â”‚
â”‚     - Photo/video proof                                           â”‚
â”‚     - Partner attestation                                         â”‚
â”‚     - Completion log                                              â”‚
â”‚                                                                   â”‚
â”‚  3. Platform tÃ­nh PPLP Score:                                     â”‚
â”‚     - Pillar Scores (S, T, H, C, U)                              â”‚
â”‚     - Light Score = 0.25S + 0.20T + 0.20H + 0.20C + 0.15U        â”‚
â”‚     - Unity Score (collaboration, beneficiary, endorsement)      â”‚
â”‚     - Multipliers (Q, I, K, Ux)                                  â”‚
â”‚     - Amount = Base Ã— Q Ã— I Ã— K Ã— Ux                             â”‚
â”‚                                                                   â”‚
â”‚  4. Insert vÃ o mint_requests vá»›i status = 'pending'               â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 2: Admin Review & Approve

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ADMIN REVIEWS AND APPROVES                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  1. Admin má»Ÿ Dashboard, xem pending requests                      â”‚
â”‚                                                                   â”‚
â”‚  2. Admin review evidence:                                        â”‚
â”‚     - Xem proof files/links                                       â”‚
â”‚     - Kiá»ƒm tra Light Score há»£p lÃ½                                â”‚
â”‚     - Verify Unity signals                                        â”‚
â”‚                                                                   â”‚
â”‚  3. Admin quyáº¿t Ä‘á»‹nh:                                             â”‚
â”‚     â”œâ”€â”€ APPROVE â†’ Tiáº¿p tá»¥c bÆ°á»›c 4                                â”‚
â”‚     â””â”€â”€ REJECT â†’ Update status = 'rejected', reason              â”‚
â”‚                                                                   â”‚
â”‚  4. Admin kÃ½ EIP-712 PureLoveProof:                              â”‚
â”‚     - MetaMask popup hiá»‡n lÃªn                                     â”‚
â”‚     - Admin dÃ¹ng Attester wallet Ä‘á»ƒ kÃ½                           â”‚
â”‚     - Signature Ä‘Æ°á»£c táº¡o off-chain                               â”‚
â”‚                                                                   â”‚
â”‚  5. Gá»i lockWithPPLP() on-chain:                                 â”‚
â”‚     - user: recipient wallet address                             â”‚
â”‚     - action: "CONTENT_CREATE" (string)                          â”‚
â”‚     - amount: calculated amount in atomic                         â”‚
â”‚     - evidenceHash: keccak256(evidence JSON)                     â”‚
â”‚     - sigs: [signature] (array)                                  â”‚
â”‚                                                                   â”‚
â”‚  6. Wait for transaction confirmation                             â”‚
â”‚                                                                   â”‚
â”‚  7. Update database:                                              â”‚
â”‚     - status = 'minted'                                          â”‚
â”‚     - tx_hash = transaction hash                                 â”‚
â”‚     - minted_at = now()                                          â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 3: User Activates & Claims

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USER ACTIVATES AND CLAIMS TOKENS                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  1. User má»Ÿ Token Lifecycle panel                                 â”‚
â”‚     - Xem LOCKED balance (tá»« alloc.locked)                       â”‚
â”‚     - Xem ACTIVATED balance (tá»« alloc.activated)                 â”‚
â”‚     - Xem FLOWING balance (tá»« balanceOf)                         â”‚
â”‚                                                                   â”‚
â”‚  2. User click "Activate":                                        â”‚
â”‚     - Gá»i contract.activate(amount)                              â”‚
â”‚     - MetaMask popup â†’ User kÃ½                                   â”‚
â”‚     - Token chuyá»ƒn tá»« LOCKED â†’ ACTIVATED                         â”‚
â”‚                                                                   â”‚
â”‚  3. User click "Claim":                                           â”‚
â”‚     - Gá»i contract.claim(amount)                                 â”‚
â”‚     - MetaMask popup â†’ User kÃ½                                   â”‚
â”‚     - Token chuyá»ƒn tá»« ACTIVATED â†’ FLOWING                        â”‚
â”‚     - Token náº±m trong vÃ­, cÃ³ thá»ƒ transfer                        â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## PhÃ¢n Chia TrÃ¡ch Nhiá»‡m

| Component | TrÃ¡ch Nhiá»‡m | Quáº£n LÃ½ Bá»Ÿi |
|-----------|-------------|-------------|
| **User Interface** | Submit evidence, view status, activate/claim | Platform |
| **Database** | Store mint_requests, profiles, roles | Platform |
| **Admin Dashboard** | Review, approve/reject, sign | Platform |
| **PPLP Engine** | Calculate scores & multipliers | SDK (copy to platform) |
| **EIP-712 Signer** | Create & verify signatures | SDK (copy to platform) |
| **Smart Contract** | Execute mint, manage allocations | On-chain (shared) |
| **Attester Registry** | Track authorized attesters | On-chain (Governance) |

---

## CÃ¡c Thá»±c Thá»ƒ On-Chain Quan Trá»ng

| Entity | Address | MÃ´ Táº£ |
|--------|---------|-------|
| **FUN Money Contract** | `0x39A1b047D5d143f8874888cfa1d30Fb2AE6F0CD6` | Smart Contract chÃ­nh |
| **Governance Wallet** | `0x7d037462503bea2f61cDB9A482aAc72a8f4F3f0f` | Quáº£n trá»‹ contract |
| **Community Pool** | `0x57da82dD53E3254576F7e578016d6d274290d949` | 99% mint vÃ o Ä‘Ã¢y |
| **Angel AI Attester** | `0x02D5578173bd0DB25462BB32A254Cd4b2E6D9a0D` | Attester máº·c Ä‘á»‹nh |

---

## LÆ°u Ã Quan Trá»ng

### 1. Nonce lÃ  cá»§a Recipient
```typescript
// ÄÃšNG: Nonce láº¥y tá»« recipient (user nháº­n token)
const nonce = await contract.nonces(recipientAddress);

// SAI: KhÃ´ng pháº£i nonce cá»§a signer (admin)
// const nonce = await contract.nonces(signerAddress); âŒ
```

### 2. Action lÃ  String, khÃ´ng pháº£i Hash
```typescript
// ÄÃšNG: Truyá»n string action
await contract.lockWithPPLP(user, "CONTENT_CREATE", amount, evidenceHash, [sig]);

// SAI: KhÃ´ng truyá»n hash
// await contract.lockWithPPLP(user, actionHash, amount, evidenceHash, [sig]); âŒ
```

### 3. Signature lÃ  Array
```typescript
// ÄÃšNG: Signature trong array
await contract.lockWithPPLP(user, action, amount, evidenceHash, [signature]);

// SAI: KhÃ´ng truyá»n signature trá»±c tiáº¿p
// await contract.lockWithPPLP(user, action, amount, evidenceHash, signature); âŒ
```

---

*Tiáº¿p theo: [02-DATABASE-SCHEMA.md](./02-DATABASE-SCHEMA.md)*
